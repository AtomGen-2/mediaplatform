{% extends "tweets/base.html" %}
{% block heading %}
YE HOME HAI
{% endblock %}

{% block content %}
<h1>This is tweet app </h1>
<div id="tweets">LOADING...</div>

<script>
const tweetsElement = document.getElementById("tweets")
const xhr = new XMLHttpRequest()
const method='GET'
const url = "/tweets"
const responseType ="json"
function formatTweetElement(tweet){
     var formattedTweet = "<div class = 'mb-4'><h1>" + tweet.id + "</h1>" + "<p>" + tweet.content + "</p></div>"
     return formattedTweet;
} 
xhr.responseType = responseType
xhr.open(method, url)
xhr.onload = function() {
    const serverResponse = xhr.response
    // "response" corresponds to the data point that is rendered in "/tweets". views.py => tweet_list_view
    const listedItems = serverResponse.response
    var finalTweetStr = ""
    listedItems.map((item) => {
        var currentItem = formatTweetElement(item)
        finalTweetStr = finalTweetStr + currentItem
    })
     tweetsElement.innerHTML = finalTweetStr;
    // listdItems is an array, we need to loop through it
}
xhr.send()
</script>

{% endblock %}